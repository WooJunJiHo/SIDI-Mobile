{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/anjuncheol/SIDI-Mobile/screens/BarCodeScanner.js\",\n  _this = this;\nimport React, { useState, useEffect } from 'react';\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport Linking from \"react-native-web/dist/exports/Linking\";\nimport { Camera } from 'expo-camera';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar Scanner = function Scanner() {\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    hasPermission = _useState2[0],\n    setHasPermission = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    scanned = _useState4[0],\n    setScanned = _useState4[1];\n  var _useState5 = useState(null),\n    _useState6 = _slicedToArray(_useState5, 2),\n    cameraRef = _useState6[0],\n    setCameraRef = _useState6[1];\n  useEffect(function () {\n    _asyncToGenerator(function* () {\n      var _yield$Camera$request = yield Camera.requestCameraPermissionsAsync(),\n        status = _yield$Camera$request.status;\n      setHasPermission(status === 'granted');\n    })();\n  }, []);\n  var handleBarCodeScanned = function handleBarCodeScanned(_ref2) {\n    var type = _ref2.type,\n      data = _ref2.data;\n    setScanned(true);\n    if (isURL(data)) {\n      handleLink(data);\n    } else {\n      Alert.alert('Barcode Scanned!', `Type: ${type}\\nData: ${data}`, [{\n        text: 'OK',\n        onPress: function onPress() {\n          return setScanned(false);\n        }\n      }], {\n        cancelable: false\n      });\n    }\n  };\n  var isURL = function isURL(str) {\n    return str.startsWith('http://') || str.startsWith('https://');\n  };\n  var handleLink = function handleLink(link) {\n    Linking.openURL(link);\n    setScanned(false);\n  };\n  if (hasPermission === null) {\n    return _jsxDEV(Text, {\n      children: \"Requesting camera permission\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 12\n    }, _this);\n  }\n  if (hasPermission === false) {\n    return _jsxDEV(Text, {\n      children: \"No access to camera\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 12\n    }, _this);\n  }\n  return _jsxDEV(View, {\n    style: styles.container,\n    children: [_jsxDEV(Camera, {\n      style: styles.camera,\n      type: Camera.Constants.Type.back,\n      onBarCodeScanned: scanned ? undefined : handleBarCodeScanned,\n      ref: function ref(_ref3) {\n        return setCameraRef(_ref3);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, _this), scanned && _jsxDEV(Button, {\n      title: 'Tap to Scan Again',\n      onPress: function onPress() {\n        return setScanned(false);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 19\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 5\n  }, _this);\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  camera: {\n    flex: 1,\n    width: '100%'\n  }\n});\nexport default Scanner;","map":{"version":3,"names":["React","useState","useEffect","Text","View","StyleSheet","Button","Alert","Linking","Camera","jsxDEV","_jsxDEV","Scanner","_useState","_useState2","_slicedToArray","hasPermission","setHasPermission","_useState3","_useState4","scanned","setScanned","_useState5","_useState6","cameraRef","setCameraRef","_asyncToGenerator","_yield$Camera$request","requestCameraPermissionsAsync","status","handleBarCodeScanned","_ref2","type","data","isURL","handleLink","alert","text","onPress","cancelable","str","startsWith","link","openURL","children","fileName","_jsxFileName","lineNumber","columnNumber","_this","style","styles","container","camera","Constants","Type","back","onBarCodeScanned","undefined","ref","title","create","flex","flexDirection","justifyContent","alignItems","width"],"sources":["/Users/anjuncheol/SIDI-Mobile/screens/BarCodeScanner.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Text, View, StyleSheet, Button, Alert, Linking } from 'react-native';\nimport { Camera } from 'expo-camera';\n\nconst Scanner = () => {\n  const [hasPermission, setHasPermission] = useState(null);\n  const [scanned, setScanned] = useState(false);\n  const [cameraRef, setCameraRef] = useState(null);\n\n  useEffect(() => {\n    (async () => {\n      const { status } = await Camera.requestCameraPermissionsAsync();\n      setHasPermission(status === 'granted');\n    })();\n  }, []);\n\n  const handleBarCodeScanned = ({ type, data }) => {\n    setScanned(true);\n    // Check if scanned data is a valid URL\n    if (isURL(data)) {\n      handleLink(data);\n    } else {\n      Alert.alert(\n        'Barcode Scanned!',\n        `Type: ${type}\\nData: ${data}`,\n        [\n          { text: 'OK', onPress: () => setScanned(false) }\n        ],\n        { cancelable: false }\n      );\n    }\n  };\n\n  const isURL = (str) => {\n    // Basic URL validation\n    return str.startsWith('http://') || str.startsWith('https://');\n  };\n\n  const handleLink = (link) => {\n    Linking.openURL(link);\n    setScanned(false);\n  };\n\n  if (hasPermission === null) {\n    return <Text>Requesting camera permission</Text>;\n  }\n  if (hasPermission === false) {\n    return <Text>No access to camera</Text>;\n  }\n\n  return (\n    <View style={styles.container}>\n      <Camera\n        style={styles.camera}\n        type={Camera.Constants.Type.back}\n        onBarCodeScanned={scanned ? undefined : handleBarCodeScanned}\n        ref={(ref) => setCameraRef(ref)}\n      />\n      {scanned && <Button title={'Tap to Scan Again'} onPress={() => setScanned(false)} />}\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  camera: {\n    flex: 1,\n    width: '100%',\n  },\n});\n\nexport default Scanner;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}